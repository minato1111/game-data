<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROK Kingdom Data 一覧</title>
    <meta name="description" content="Rise of Kingdoms ゲームデータ統計・分析ツール">
    <link rel="stylesheet" href="styles/common.css">
    <style>
        /* パスワード保護画面 */
        #passwordProtection {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .password-container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .password-container h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 28px;
        }

        .password-container p {
            color: #7f8c8d;
            margin-bottom: 30px;
        }

        .password-container input {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 20px;
        }

        .password-container button {
            width: 100%;
            padding: 12px 20px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .password-container button:hover {
            background: #2980b9;
        }

        #passwordError {
            color: #e74c3c;
            margin-top: 15px;
            display: none;
        }

        /* メインコンテンツ（初期状態では非表示） */
        #mainContent {
            display: none;
        }

        .nav-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .nav-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .nav-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
            border-color: #3498db;
        }

        .nav-card-icon {
            font-size: 48px;
            margin-bottom: 15px;
            display: block;
        }

        .nav-card h3 {
            color: #2c3e50;
            font-size: 20px;
            margin-bottom: 10px;
        }

        .nav-card p {
            color: #7f8c8d;
            font-size: 14px;
            line-height: 1.5;
        }

        .nav-card.data { background: linear-gradient(135deg, #667eea 0%, #764ba2 20%); }
        .nav-card.growth { background: linear-gradient(135deg, #f093fb 0%, #f5576c 20%); }
        .nav-card.statistics { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 20%); }
        .nav-card.individual { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 20%); }
        .nav-card.kvk { background: linear-gradient(135deg, #fa709a 0%, #fee140 20%); }
        .nav-card.contact { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 20%); }

        .nav-card.data, .nav-card.growth, .nav-card.statistics, 
        .nav-card.individual, .nav-card.kvk, .nav-card.contact {
            color: white;
        }

        .nav-card.data h3, .nav-card.growth h3, .nav-card.statistics h3, 
        .nav-card.individual h3, .nav-card.kvk h3, .nav-card.contact h3 {
            color: white;
        }

        .nav-card.data p, .nav-card.growth p, .nav-card.statistics p, 
        .nav-card.individual p, .nav-card.kvk p, .nav-card.contact p {
            color: rgba(255, 255, 255, 0.8);
        }

        @media (max-width: 768px) {
            .nav-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- パスワード保護画面 -->
    <div id="passwordProtection">
        <div class="password-container">
            <h2>🔒 パスワード認証</h2>
            <p>このサイトを閲覧するにはパスワードが必要です</p>
            <input type="password" id="passwordInput" placeholder="パスワードを入力">
            <button id="loginButton">ログイン</button>
            <div id="passwordError">パスワードが正しくありません</div>
        </div>
    </div>

    <!-- メインコンテンツ（初期状態では非表示） -->
    <div class="container" id="mainContent">
        <h1>⚔️ ROK Kingdom Data 一覧</h1>
        <div class="subtitle">Rise of Kingdoms - データ統計・分析ツール</div>
        <div class="update-info">
            CSVファイル最終更新: <span id="updateDate">確認中...</span> | 
            データ件数: <span id="dataCount">-</span>件
        </div>
        
        <!-- ナビゲーショングリッド -->
        <div class="nav-grid">
            <div class="nav-card data" onclick="navigateTo('data.html')">
                <span class="nav-card-icon">📊</span>
                <h3>データ一覧</h3>
                <p>全プレイヤーのデータを一覧表示・検索・フィルタリング</p>
            </div>
            
            <div class="nav-card growth" onclick="navigateTo('growth.html')">
                <span class="nav-card-icon">📈</span>
                <h3>成長ランキング</h3>
                <p>プレイヤーの成長率とランキングを分析</p>
            </div>
            
            <div class="nav-card statistics" onclick="navigateTo('statistics.html')">
                <span class="nav-card-icon">📋</span>
                <h3>上位300人統計</h3>
                <p>上位300人のパワー推移と統計情報</p>
            </div>
            
            <div class="nav-card individual" onclick="navigateTo('individual.html')">
                <span class="nav-card-icon">👤</span>
                <h3>個人分析</h3>
                <p>特定プレイヤーの詳細分析とグラフ</p>
            </div>
            
            <div class="nav-card kvk" onclick="navigateTo('kvk.html')">
                <span class="nav-card-icon">⚔️</span>
                <h3>KVKノルマ</h3>
                <p>KVKイベント用のノルマ計算ツール</p>
            </div>
            
            <div class="nav-card contact" onclick="navigateTo('contact.html')">
                <span class="nav-card-icon">📞</span>
                <h3>問い合わせ先</h3>
                <p>サポートと連絡先情報</p>
            </div>
        </div>
    </div>

    <script>
        // パスワード認証
        const PASSWORD = 'saisoku';

        document.getElementById('loginButton').addEventListener('click', function() {
            const inputPassword = document.getElementById('passwordInput').value;
            const errorDiv = document.getElementById('passwordError');
            
            if (inputPassword === PASSWORD) {
                document.getElementById('passwordProtection').style.display = 'none';
                document.getElementById('mainContent').style.display = 'block';
                loadUpdateInfo();
            } else {
                errorDiv.style.display = 'block';
                errorDiv.style.animation = 'shake 0.5s';
                setTimeout(() => {
                    errorDiv.style.animation = '';
                }, 500);
            }
        });

        // Enterキーでログイン
        document.getElementById('passwordInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('loginButton').click();
            }
        });

        // ページナビゲーション
        function navigateTo(page) {
            window.location.href = page;
        }

        // データ更新情報を取得
        function loadUpdateInfo() {
            fetch('Master_Data.csv')
                .then(response => response.text())
                .then(data => {
                    const lines = data.split('\n').filter(line => line.trim());
                    const dataCount = lines.length - 1; // ヘッダーを除く
                    document.getElementById('dataCount').textContent = dataCount.toLocaleString();
                    
                    // 最新データ日を取得
                    if (lines.length > 1) {
                        const lastLine = lines[lines.length - 1];
                        const columns = lastLine.split(',');
                        if (columns.length > 1) {
                            document.getElementById('updateDate').textContent = columns[1] || '不明';
                        }
                    }
                })
                .catch(error => {
                    console.error('データ読み込みエラー:', error);
                    document.getElementById('dataCount').textContent = '読み込みエラー';
                    document.getElementById('updateDate').textContent = '確認できません';
                });
        }
    </script>
</body>
</html>