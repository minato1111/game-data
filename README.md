# ROK Kingdom Data 分析ツール

Rise of Kingdoms ゲームデータの統計・分析を行うWebアプリケーションです。

## 🚀 最新の改善点（2025年10月更新）

### セキュリティ強化
- ✅ パスワードをSHA-256ハッシュ化（プレーンテキストから移行）
- ✅ XSS攻撃対策（HTMLエスケープ処理追加）
- ✅ グローバルエラーハンドラー実装
- ✅ Chrome拡張機能エラーの適切な除外

### パフォーマンス最適化
- ✅ DEBUG_MODE=false（本番環境設定）
- ✅ CSVファイルキャッシング（5分間）
- ✅ チャンク処理によるメモリ使用量削減
- ✅ エラー表示件数制限（最大5件）
- ✅ BOM処理の最適化（常時実行）
- ✅ DOM要素キャッシング

### エラーハンドリング改善
- ✅ 詳細なエラーメッセージと解決方法の提示
- ✅ 自動リロード機能付きエラー画面
- ✅ 未処理Promiseエラーのキャッチ
- ✅ 手動CSV解析フォールバック

## 📁 ファイル構成

```
game-data-main/
├── index.html       # メインページ（データ分析）
├── home.html        # ホーム画面
├── script.js        # メイン機能（最適化済み）
├── styles.css       # スタイルシート
├── Master_Data.csv  # プレイヤーデータ
└── README.md        # このファイル
```

## 🔧 技術仕様

### 使用技術
- **HTML5/CSS3/JavaScript (ES6+)**
- **Chart.js** - グラフ表示
- **PapaParse** - CSV解析
- **SHA-256** - パスワードハッシュ化

### ブラウザ要件
- Chrome/Edge/Firefox/Safari（最新版）
- JavaScript有効化必須

## ⚙️ 設定項目

`script.js`内の設定値:

```javascript
const DEBUG_MODE = false;           // 本番: false, 開発: true
const CSV_FILE_PATH = 'Master_Data.csv';
const PERFORMANCE_CONFIG = {
    CACHE_DURATION: 300000,    // 5分キャッシュ
    CHUNK_SIZE: 1000,          // チャンク処理サイズ
    MAX_ERROR_DISPLAY: 5,      // 最大エラー表示数
    PAGINATION_SIZE: 50        // ページネーション
};
```

## 🛡️ セキュリティ

- パスワード認証（ハッシュ化済み）
- XSS攻撃対策
- セッションベース認証

## 📊 機能一覧

1. **データ一覧** - プレイヤー詳細データ表示
2. **成長ランキング** - 期間別成長率分析
3. **上位統計** - 上位300人の統計グラフ
4. **個人分析** - 特定プレイヤーの履歴
5. **KVKノルマ** - Power帯別ノルマ管理
6. **連絡先** - 問い合わせ情報

## 🚀 デプロイ方法

1. 全ファイルをWebサーバーにアップロード
2. `Master_Data.csv`が同じディレクトリにあることを確認
3. ブラウザでアクセス

## 🔍 トラブルシューティング

### CSVファイルが読み込まれない
- ファイルパスを確認
- サーバーの読み込み権限を確認
- ブラウザのキャッシュをクリア

### パスワードが通らない
- 大文字小文字を確認
- 特殊文字の入力を確認

### パフォーマンスが悪い
- `DEBUG_MODE = false`に設定
- ブラウザの開発者ツールでエラー確認

## 📝 更新履歴

**v2.1** (2025年10月7日)
- DEBUG_MODE本番環境設定（false）
- BOM処理の最適化と安定化
- Chrome拡張機能エラーの除外処理
- README更新（最新機能反映）

**v2.0** (2024年)
- セキュリティ大幅強化
- パフォーマンス最適化
- エラーハンドリング改善
- 本番環境対応完了

**v1.0** (初期版)
- 基本機能実装
- データ分析機能
- グラフ表示機能